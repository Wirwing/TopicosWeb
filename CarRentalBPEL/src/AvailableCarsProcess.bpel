<?xml version="1.0" encoding="UTF-8" ?>
<process
    name="AvailableCarsProcess"
    targetNamespace="http://enterprise.netbeans.org/bpel/CarRentalBPEL/AvailableCarsProcess"
    xmlns:tns="http://enterprise.netbeans.org/bpel/CarRentalBPEL/AvailableCarsProcess"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:sxt="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Trace" 
    xmlns:sxed="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Editor2"
    xmlns:sxat="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Attachment"
    xmlns:sxeh="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling" xmlns:sxdh="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/DataHandling">
   <import namespace="http://enterprise.netbeans.org/bpel/HubServiceWrapper" location="HubServiceWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
   <import namespace="http://rentcar.hub.com/" location="http://192.168.1.77:8080/HubService/HubService?wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
   <import namespace="http://j2ee.netbeans.org/wsdl/CarRentalBPEL/src/CarRentalBPEL_WSDL" location="CarRentalBPEL_WSDL.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
   <partnerLinks>
      <partnerLink name="CarRentalHubLink" xmlns:tns="http://j2ee.netbeans.org/wsdl/CarRentalBPEL/src/CarRentalBPEL_WSDL" partnerLinkType="tns:CarRentalBPEL_WSDL" myRole="CarRentalBPEL_WSDLPortTypeRole"/>
      <partnerLink name="HubServicePartnerLink" xmlns:tns="http://enterprise.netbeans.org/bpel/HubServiceWrapper" partnerLinkType="tns:HubServiceLinkType" partnerRole="HubServiceRole"/>
   </partnerLinks>
   <variables>
      <variable name="GetAvailableProvidersOut" xmlns:tns="http://j2ee.netbeans.org/wsdl/CarRentalBPEL/src/CarRentalBPEL_WSDL" messageType="tns:GetAvailableProvidersResponse"/>
      <variable name="GetRentalProvidersOut" xmlns:tns="http://rentcar.hub.com/" messageType="tns:getRentalProvidersResponse"/>
      <variable name="GetRentalProvidersIn" xmlns:tns="http://rentcar.hub.com/" messageType="tns:getRentalProviders"/>
      
   </variables>
   <sequence>
      <pick name="ServicePicker" createInstance="yes">
         <onMessage partnerLink="CarRentalHubLink" operation="GetAvailableProviders" xmlns:tns="http://j2ee.netbeans.org/wsdl/CarRentalBPEL/src/CarRentalBPEL_WSDL" portType="tns:CarRentalBPEL_WSDLPortType">
            <sequence name="Sequence1">
               <assign name="Assign1">
                  <copy>
                     <from>string()</from>
                     <to variable="GetRentalProvidersIn" part="parameters"/>
                  </copy>
               </assign>
               <invoke name="Invoke1" partnerLink="HubServicePartnerLink" operation="getRentalProviders" xmlns:tns="http://rentcar.hub.com/" portType="tns:HubService" inputVariable="GetRentalProvidersIn" outputVariable="GetRentalProvidersOut"/>
               <assign name="Assign2">
                  <copy>
                     <from variable="GetRentalProvidersOut" part="parameters"/>
                     <to variable="GetAvailableProvidersOut" part="providers"/>
                  </copy>
               </assign>
               <reply name="Reply1" partnerLink="CarRentalHubLink" operation="GetAvailableProviders" portType="tns:CarRentalBPEL_WSDLPortType" variable="GetAvailableProvidersOut"/>
            </sequence>
         </onMessage>
      </pick>
   </sequence>
</process>
